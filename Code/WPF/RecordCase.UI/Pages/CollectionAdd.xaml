<UserControl x:Class="RecordCase.UI.Pages.CollectionAdd"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mui="http://firstfloorsoftware.com/ModernUI"
      xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
      xmlns:command="http://www.galasoft.ch/mvvmlight"
      mc:Ignorable="d" 
      d:DesignHeight="500" d:DesignWidth="500"
      DataContext="{Binding Collections, Source={StaticResource Locator}}">
    <ScrollViewer>
        <StackPanel Orientation="Vertical">
            <StackPanel.Resources>
                <Style TargetType="StackPanel">
                    <Setter Property="Orientation" Value="Horizontal" />
                    <Setter Property="Margin" Value="0,0,0,4" />
                </Style>
                <Style TargetType="Label" BasedOn="{StaticResource {x:Type Label}}">
                    <Setter Property="Width" Value="120" />                    
                </Style>
            </StackPanel.Resources>
            <!-- Add New Collection -->
            <StackPanel>
                <Label Content="Collection Name" Target="{Binding ElementName=TxtAddCollection}"/>
                <TextBox x:Name="TxtAddCollection" Width="200" Text="{Binding Path=NewCollectionMetadata.Name, Mode=TwoWay, ValidatesOnDataErrors=True}"/>
            </StackPanel>
            <StackPanel>
                <Label Content="Image" Target="{Binding ElementName=TxtAddCollection}"/>
                <Image Stretch="Uniform" HorizontalAlignment="Left" Width="200" Height="200" Source="{Binding Path=NewCollectionMetadata.Image, Converter={StaticResource BinaryImageConverter}}" />
                <Button ToolTip="open image" Content="Open">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Click" >
                            <command:EventToCommand CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" Command="{Binding OpenImageFileCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>
            </StackPanel>
            <Button ToolTip="add" Content="Add">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Click" >
                        <command:EventToCommand CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}}" Command="{Binding AddCollectionCommand}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </Button>
        </StackPanel>
    </ScrollViewer>
</UserControl>
